FROM @BASE_DOCKER_TAG@

ENV DEBIAN_FRONTEND=noninteractive

# TODO: Move to middle docker file or make another solution
ADD setup.py /usr/src/@UTIL_NAME@/setup.py
ADD src/ /usr/src/@UTIL_NAME@/src
ADD README.md /usr/src/@UTIL_NAME@/README.md
ADD LICENSE /usr/src/@UTIL_NAME@/LICENSE
ADD Makefile /usr/src/@UTIL_NAME@/Makefile
ADD docker.mk /usr/src/@UTIL_NAME@/docker.mk
ADD debian/ /usr/src/@UTIL_NAME@/debian

RUN apt-get install -y debhelper
RUN pip3 install argparse-manpage==3 pytest==7.1.2 pytest-mock==3.8.2
RUN mkdir -p @LOGS_PATH@

CMD make test
